[package]
name: iraf
version: 2.16.1

[about]
home: http://iraf.noao.edu
license: MIT
summary: NOAO Image Reduction and Analysis Facility

[source]
# Remember, always 32-bit! Now feast upon my tears.
#fn: ${package:name}.lnux.x86.fixup.tar.gz
#url: ${cbc_cgi:url}/${fn}
git_url: https://bitbucket.org/jhunkeler/${package:name}

# Tarball should be generated with:
# git archive --format tar.gz --prefix iraf/ -o ../iraf.lnux.x86.fixup.tar.gz -v master

[build]
number: 1
detect_binary_files_with_prefix: True

[requirements]
build:
    # Luck
run:
    # Gallant effort

[cbc_build]
linux:
    export TERM=xterm
    FAKEHOME=$$PREFIX/iraf/fakehome
    cp -a `pwd` $$PREFIX/iraf
    cd $$PREFIX/iraf
    ./install \
        --accept-defaults \
        --fakehome $$FAKEHOME \
        --term xterm \
        --mach linux \
        --bindir $$FAKEHOME/bin \
        --cache $$FAKEHOME/cache \
        --imdir $$FAKEHOME/imdir
    rm -f bin
    ln -s bin.linux bin
    ln -s bin.linux bin.linux64

windows:
    echo Not supported on Windows
